## 希尔排序

希尔排序是对插入排序的优化，主要思路是逐渐调整数组中逆序对的数量，使整个数组越来越有序，然后借助插入排序对有序数组的排序效率很高，从而实现对基础插入排序的优化。

希尔排序的重点在于步长的选择，这里我们默认使用数组的一半，然后每次折半。

外层循环从 gap 的位置开始向后遍历，然后内层循环从当前位置开始向前查找，但是每次都跳 gap 个元素，如果前面的元素比当前元素更大，就应该向后移动，给当前元素让出位置，直到找到合适的插入位置或者遍历结束，然后把提前存下来的目标值复制到正确位置。

经过这一轮排序后，已经把数组后半段数据和前半段做了一些比较和处理，有概率消除了一些逆序对，然后让整个数组变得更有序，然后 gap 折半后重新进行插入排序。因为数组整体相对有序，所以进不去内层的 while 循环，整体上复杂度是优于 n^2 的，这也是希尔排序的优化点。

直到 gap 缩减到 1，相当于进行了一个完整的插入排序，但是因为这时候数组已经几乎有序，所以效率也很高， while 循环不会执行 n 次。

```c
void shellSort(int* arr, int length) {
  int gap = length / 2;
  while (gap >= 1) {
    for (int i = gap; i < length; i++) {
      int target = arr[i];
      int j = i;
      while (j - gap >= 0 && arr[j - gap] > target) { 
        arr[j] = arr[j - gap];
        j -= gap;
      }
      arr[j] = target;
    }
    gap /= 2;
  }
}
```
